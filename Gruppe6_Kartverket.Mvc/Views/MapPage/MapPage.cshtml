
@{
    ViewData["Title"] = "Map Page";
}

@section HeadContent {
<!-- Link to CSS file -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
}

<div id="map"></div>


@section Scripts {

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
        
    <script>

            var map = L.map('map').setView([58.164048, 8.004007], 13); //initial location (can this be fetched from device? )
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            var drawnItems = new L.FeatureGroup();
            map.addLayer(drawnItems);
            
            
            // Creates the drawing controls on the left hand side
            // The drawing control enables drawing of markers, polygons, and polylines
            var drawControl = new L.Control.Draw({
                draw: {
                    polygon: true,
                    polyline: true,
                    marker: true,
                    circle: false, // Disable circle drawing
                    rectangle: true
                },
                edit: {
                    featureGroup: drawnItems
                }
            });
            map.addControl(drawControl);

            map.on(L.Draw.Event.CREATED, function (e) { 
                var type = e.layerType;
                    layer = e.layer;

                drawnItems.addLayer(layer);
            )};

    </script>
}