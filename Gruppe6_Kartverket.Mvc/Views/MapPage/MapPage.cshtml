@model Gruppe6_Kartverket.Mvc.Models.CaseRegistrationModel

@{
    ViewData["Title"] = "Map Page";
}

@section HeadContent {
    <!-- Link to CSS file -->
    <link rel="stylesheet" href="~/css/mapPage.css" asp-append-version="true" />
}

<div class="map-page-wrapper">
    <div class="map-and-control-wrapper">
        <div class="map" id="map"></div>
        <div class="control-button-bar">
            <div class="new-case" id="new-case">
                <button class="btn" id="new-case-button">New Case</button>
            </div>
            <div class="map-button-group" id="map-button-group">
                <button class="map-button" data-select="Point">Punkt</button>
                <button class="map-button" data-select="LineString">Linje</button>
                <button class="map-button" data-select="Polygon">Flate</button>
                <button class="map-button" data-select="Delete">Slett</button>
            </div>
            <input type="hidden" id="actionType" value="None">
        </div>
    </div>
    <div class="case-input-wrapper" id="case-input-wrapper">
        <form asp-controller="MapPage" asp-action="MapPage" id="CaseForm" method="post">
            <p>
            <div>
                <label asp-for="CaseTitle">Tittel på case:</label>
                <input asp-for="CaseTitle" placeholder="Skriv inn tittel" />
                <span asp-validation-for="CaseTitle" class="text-danger"></span>
            </div>
            </p>
            <p>
            <div>
                <label asp-for="Kategori">Kategori:</label>
                <select asp-for="Kategori">
                    <option value="" selected disabled>Velg kategori</option>
                    <option value="Hindring">Hindring</option>
                    <option value="Vei">Vei</option>
                    <option value="Sti">Sti</option>
                    <option value="Adresse">Adresse</option>
                    <option value="Tunell">Tunell</option>
                    <option value="Annet">Annet</option>
                </select>
            </div>
            </p>
            <p>
                <div>
                    <label asp-for="Beskrivelse">Beskrivelse:</label>
                    <input asp-for="Beskrivelse" placeholder="Beskriv problemet her" />
                    <span asp-validation-for="Beskrivelse" class="text-danger"></span>
                </div>
            </p>
            <input asp-for="GeoJson" type="hidden" id="geoJsonInput"/>
            <button type="submit" class="btn btn-primary">Testing</button>
        </form>

        <p>Input for case info will be placed in here</p>
        <div class="submit-cancel-wrapper">
            <button class="cancel-case-button" id="cancel-case-button">Avbryt</button>

            <!-- Gray the button out intill we are able to submit -->
            <button class="submit-case">Submit</button> <!-- Maybe have input type="submit" & type="reset"? -->
        </div>
    </div>
</div>

<!-- Section for Popups -->
<div class="overlay-and-popup">
    <!-- Add a function for when the overlay is clicked and you are under the process of insering phone number, to make sure that if you want to go out or not. -->
    <div class="overlay" id="insert-phone-number-overlay"></div>

    <!-- For popups that don't need a function when the overlay is clicked -->
    <div class="overlay popup-close" id="popup-overlay"></div>

    <div class="popup" id="insert-phone-number">
        <h2>Telefonnummer</h2>
        <p>
            "Legg til forklaring her"
        </p>
        <div>
            <input type="text" placeholder="Telefonnummer">
            <button>Verifiser</button>
            <button style="display: none;">GÃƒÂ¥ videre</button>
            <button class="popup-close">Close</button> <!-- Change to are you sure or something idk -->
        </div>
    </div>
    <div class="popup" id="new-case-explanation">
        <h2>Ny registrering</h2>
        <p>
            "Legg til praktisk info her"
        </p>
        <div>
            <button onclick="location.href='@Url.Action("LogIn", "Account")'">Logg inn</button>
            <button id="to-tlf-popup">Telefonnummer</button>
            <button class="popup-close">Close</button>
        </div>
    </div>
    <div class="popup" id="delete-features">
        <h2>Det er ingen flere tegninger ÃƒÂ¥ slette</h2>
        <button class="popup-close">Close</button>
    </div>
    <div class="popup" id="max-features">
        <h2>Max features reached</h2>
        <p>
            "Du kan ikke tegne mer enn X figurer"
        </p>
        <button class="popup-close">Close</button>
    </div>
    <div class="popup" id="submit-case-popup">
        <h2>Submit?</h2>
        <p>
            Ã˜nsker du Ã¥ sende inn saken?
        </p>
        <button class="submit-case-confirmation">Send inn</button>
        <button class="popup-close">Tilbake</button>
    </div>
    <div class="popup" id="case-not-valid">
        <h2>Ikke alle felt er fylt inn</h2>
        <p>
            Pass pÃ¥ at alle feltene er fylt inn og at det er tegnet en figur pÃ¥ kartet.
        </p>
        <button class="popup-close">Ok</button>
    </div>
    <div class="popup" id="case-not-valid">
        <h2>Ikke alle felt er fylt inn</h2>
        <p>
            Pass pÃ¥ at alle feltene er fylt inn og at det er tegnet en figur pÃ¥ kartet.
        </p>
        <button class="popup-close">Ok</button>
    </div>
    <div class="popup" id="avbryt-case">
        <h2>Avbryt?</h2>
        <p>
            ÃƒËœnsker du ÃƒÂ¥ avbryte? Dette vil slette all informasjon som er lagt inn.
        </p>
        <button class="cancel-case-confirmation">Avbryt</button>
        <button class="popup-close">Tilbake</button>
    </div>
    <div class="popup" id="case-submit-help">
        <!-- Have a help button somewhere, and maybe show this after Log in/tlf -->
        <h2>Hvordan registrere sak</h2>
        <p>
            "Legg inn forklaring/hjelp pÃ¥ hvordan sende inn case"
        </p>
        <button class="popup-close">Close</button>
    </div>
    @if (ViewBag.ShowSubmittedPopup == true)
    {
        <div class="popup" id="case-submitted">
            <h2>Case submitted</h2>
            <p>
                "Case submitted text" <br />
                "Info fra innsendingen"
            </p>
            <button class="popup-close">Close</button>
        </div>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                document.getElementById("popup-overlay").style.display = "block";
                function resetCaseForm() {
                    var form = document.getElementById("CaseForm");
                    form.reset();
                };
                resetCaseForm();
            });
        </script>
    }
</div>

<p hidden id="loggedIn">@ViewBag.LoggedIn</p>


@section Scripts {
    <script type="module" src="~/js/ol_map5.js"></script>
    <script>
        function resetCaseForm() {
            var form = document.getElementById("CaseForm");
            form.reset();
        };
    </script>
}